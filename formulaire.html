<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulaire Avis Patients</title>
    <link rel="stylesheet" href="formulaire.css">
    <script src="script.js" type="module"></script>
    
   
</head>
<body>
    <div class="image-container"></div>
    <div class="form-container">
        <form id="avisForm" >
            <h1>Formulaire de Recueil des Avis des Patients</h1>
            <p>Merci de prendre quelques instants pour partager votre exp√©rience.</p>
    
           <div>
            <h4>Nom et Pr√©nom</h4>
            <input type="text" name="nom_prenom" required>
           </div>
    
           <div>
            <h4>√Çge</h4>
            <label><input type="radio" name="age" value="Moins de 18 ans"> Moins de 18 ans</label><br>
            <label><input type="radio" name="age" value="18 - 30 ans"> 18 - 30 ans</label><br>
            <label><input type="radio" name="age" value="31 - 50 ans"> 31 - 50 ans</label><br>
            <label><input type="radio" name="age" value="51 ans et plus"> 51 ans et plus</label>
           </div>
    
           <div>
            <h4>Sexe</h4>
            <label><input type="radio" name="sexe" value="Homme"> Homme</label><br>
            <label><input type="radio" name="sexe" value="Femme"> Femme</label><br>
           </div>
    
           <div>
            <h4>Nom de l‚Äôh√¥pital ou clinique</h4>
           
           <select name="hopital" id="hopital" required >
                <option value="" disabled selected>-- S√©lectionnez l'h√¥pital ou la clinique --</option>
                <option value="1">Centre hospitalier universitaire de Cocody (CHU de Cocody)</option>
                <option value="2">Centre hospitalier universitaire de Treichville (CHU de Treichville)</option>
                <option value="3">Centre hospitalier universitaire de Yopougon (CHU de Yopougon)</option>
                <option value="4">Centre hospitalier universitaire d'Angr√© (CHU d'Angr√©)</option>
                <option value="5">H√¥pital militaire d'Abidjan (HMA)</option>
                <option value="6">Centre national de transfusion sanguine (Abidjan)</option>
                <option value="7">Centre de sant√© El Rapha3</option>
                <option value="8">Centre de sant√© urbain √† base communautaire d'Abobo</option>
                <option value="9">Centre √âducation Sanitaire</option>
                <option value="10">Centre m√©dical le CEGOS</option>
                <option value="11">H√¥pital g√©n√©ral d'Abobo</option>
                <option value="12">H√¥pital g√©n√©ral de Port-Bou√´t</option>
                <option value="13">H√¥pital g√©n√©ral d'Anyama</option>
                <option value="14">H√¥pital g√©n√©ral de Koumassi</option>
                <option value="15">H√¥pital g√©n√©ral de Marcory</option>
                <option value="16">Polyclinique internationale Sainte Anne-Marie (PISAM)</option>
                <option value="17">Polyclinique des Deux-Plateaux</option>
                <option value="18">Polyclinique M√©dicale FARAH, Marcory</option>
                <option value="19">Centre d'imagerie m√©dicale d'Abidjan (CIMA)</option>
                <option value="20">Polyclinique Avicenne - Boulevard Achalme, Marcory R√©sidentiel</option>
                <option value="21">Polyclinique internationale H√¥tel Dieu Abidjan (PIHDA)</option>
                <option value="22">Polyclinique Les Gr√¢ces, Marcory Zone 4</option>
                <option value="23">Polyclinique centrale Abobo</option>
                <option value="24">Polyclinique internationale de l'Ind√©ni√©</option>
                <option value="25">Polyclinique Central, ABOBO</option>
                <option value="26">Polyclinique Sainte-Anne Marie Anani</option>
                <option value="27">Polyclinique "Les Gr√¢ces - Marcory-</option>
                <option value="28">Polyclinique La Providence - Cocody</option>
                <option value="29">Polyclinique Panth√©on m√©dical-Riviera 3</option>
                <option value="30">Clinique m√©dical Adjam√© Libert√© (CMAL)</option>
                <option value="32">Clinique Procr√©a- cocody riviera palmeraie</option>
                <option value="33">Centre m√©dical de Dermatologie d'Abidjan Cocody</option>
                <option value="34">Centre international d'ophtalmologie</option>
                <option value="35">Centre m√©dical La Rochelle</option>
                <option value="36">Clinique Trade Center</option>
                <option value="37">Clinique Goci</option>
                <option value="38">Centre m√©dical "La Sagesse", quartier Abobo</option>
                <option value="39">Clinique Israel</option>
                <option value="40">Clinique Les Arcades</option>
                <option value="41">Clinique m√©dicale Les B√©atitudes</option>
                <option value="42">Clinique m√©dicale La Rosette</option>
                <option value="43">Clinique m√©dicale le Messie</option>
                <option value="44">Clinique m√©dicale du Dokui</option>
                <option value="45">Espace m√©dical Saint-Paul</option>
                <option value="46">Clinique universelle Sant√© Cusa</option>
                <option value="47">Clinique Saint-Martin de Tours (CSM)</option>
                <option value="48">centre m√©dical Les Archanges</option>
                <option value="49">Clinique Saint-Gabriel</option>
                <option value="50">Clinique Rhema</option>
                <option value="51">Clinique Nanan</option>
                <option value="52">Clinique m√©dicale La Colombe</option>
                <option value="53">Clinique Rosa Maria</option>
                <option value="54">Clinique m√©dicale Anne Marie</option>
                <option value="55">Espace m√©dical La Pulcherie</option>
                <option value="56">Centre m√©dical Les Cherubins, Abobo</option>
                <option value="57">Centre M√©dical EDEN Abobo Belleville</option>
                <option value="58">Clinique m√©dicale Saint-Viateur, Riviera palmeraie</option>
                <option value="59">Groupe m√©dical Plateau</option>
                <option value="60">Groupe m√©dical Prometh√©e</option>
                <option value="61">Centre m√©dical Inter Entreprise (plateau)</option>
                <option value="63">Espace m√©dical Le Phenix</option>
                <option value="64">Centre m√©dical Harmony (CMH), Riviera Golf</option>
                <option value="65">Centre m√©dical Social El-Kabod , Koumassi Remblais</option>
                <option value="66">Centre m√©dical des ≈ìuvres et mission (CMOMISS), Yopougon Camp Militaire</option>
                <option value="67">Clinique m√©dicale Danga, du quartier Cocody Danga</option>
                <option value="68">Centre M√©dical International La Gospa, Cocody Danga</option>
                <option value="69">Clinique Medicale OASIS SANTE,Yopougon Keneya</option>
                <option value="70">Espace M√©dical Saint Georges (M√©agui)</option>
                <option value="71">Clinique RIMCA (Koumassi)</option>
                
            </select>
           </div>
    
           <div>
            <h4>Motif de visite</h4>
            <label><input type="radio" name="motif" value="Consultation"> Consultation</label><br>
            <label><input type="radio" name="motif" value="Urgence"> Urgence</label><br>
            <label><input type="radio" name="motif" value="Hospitalisation"> Hospitalisation</label><br>
            <label><input type="radio" name="motif" value="Maternit√©"> Maternit√©</label><br>
            <label><input type="radio" name="motif" value="Autre"> Autre</label>
           </div>
    
           <div>
            <h4>Si autre, pr√©cisez :</h4>
            <input type="text" name="motif_autre">
           </div>
    
           <div>
            <h4>Qualit√© de l‚Äôaccueil et de la prise en charge</h4>
            <p>(1 = Tr√®s mauvais, 5 = Excellent)</p>
            <div class="rating" id="rating1">
                <span data-value="1">‚òÖ</span>
                <span data-value="2">‚òÖ</span>
                <span data-value="3">‚òÖ</span>
                <span data-value="4">‚òÖ</span>
                <span data-value="5">‚òÖ</span>
            </div>
            <input type="hidden" name="accueil" id="accueil_value">
           </div>
    
           <div>
            <h4>Temps d‚Äôattente acceptable ?</h4>
            <label><input type="radio" name="attente" value="Oui"> Oui</label><br>
            <label><input type="radio" name="attente" value="Non"> Non</label>
           </div>
    
           <div>
            <h4>Le personnel soignant √©tait-il √† l‚Äô√©coute ?</h4>
            <p>(1 = Tr√®s mauvais, 5 = Excellent)</p>
            <div class="rating" id="rating2">
                <span data-value="1">‚òÖ</span>
                <span data-value="2">‚òÖ</span>
                <span data-value="3">‚òÖ</span>
                <span data-value="4">‚òÖ</span>
                <span data-value="5">‚òÖ</span>
            </div>
            <input type="hidden" name="ecoute" id="ecoute_value">
           </div>
    
           <div>
            <h4>Difficult√©s rencontr√©es</h4>
            <label><input type="checkbox" name="difficultes[]" value="Attente"> Attente</label><br>
            <label><input type="checkbox" name="difficultes[]" value="Manque de mat√©riel"> Manque de mat√©riel</label><br>
            <label><input type="checkbox" name="difficultes[]" value="Personnel indisponible"> Personnel indisponible</label><br>
            <label><input type="checkbox" name="difficultes[]" value="Non"> Non</label>
           </div>
    
           <div>
            <h4>Expliquez bri√®vement votre exp√©rience :</h4>
            <textarea name="experience" rows="4"></textarea>
           </div>
    
           <div>
            <h4>Recommanderiez-vous cet h√¥pital/clinique ?</h4>
            <input type="text" name="recommandation">
           </div>
    
           <div>
            <h4>Suggestions d‚Äôam√©lioration</h4>
            <input type="text" name="suggestion">
           </div>
    
           <div>
            <button type="submit">Envoyer</button>
           </div>
        </form>
    </div>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
    
        // üîπ Remplace par TES valeurs Firebase üîπ
        const firebaseConfig = {
            apiKey: "AIzaSyCl46lrkQejIIz24g1P7Qt2ktNbG0MML4o",
            authDomain: "avis-au-client.firebaseapp.com",
            projectId: "avis-au-client",
            storageBucket: "avis-au-client.appspot.com",
            messagingSenderId: "291367297087",
            appId: "1:291367297087:web:09beaf7794126fc79bd88a",
            measurementId: "G-WESSM7PQZM"
        };
    
        // Initialisation Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app); // üîπ Ajout de Firestore
    
        // Gestion du formulaire
        document.querySelector("form").addEventListener("submit", async function(event) {
            event.preventDefault(); // Emp√™cher le rechargement de la page
    
            // R√©cup√©rer les valeurs du formulaire
            const nomPrenom = document.querySelector('input[name="nom_prenom"]').value.trim();
            const age = document.querySelector('input[name="age"]:checked')?.value || "";
            const sexe = document.querySelector('input[name="sexe"]:checked')?.value || "";
            const hopital = document.querySelector('select[name="hopital"]').value.trim();
            const motif = document.querySelector('input[name="motif"]:checked')?.value || "";
            const motifAutre = document.querySelector('input[name="motif_autre"]').value.trim();
            const accueil = document.getElementById("accueil_value").value.trim();
            const attente = document.querySelector('input[name="attente"]:checked')?.value || "";
            const ecoute = document.getElementById("ecoute_value").value.trim();
            const experience = document.querySelector('textarea[name="experience"]').value.trim();
            const recommandation = document.querySelector('input[name="recommandation"]').value.trim();
            const suggestion = document.querySelector('input[name="suggestion"]').value.trim();
    
            // R√©cup√©rer les difficult√©s (cases √† cocher)
            const difficulties = Array.from(document.querySelectorAll('input[name="difficultes[]"]:checked'))
                                     .map(el => el.value);
                                     if (motif === "Autre" && !motifAutre) {
            alert("Veuillez pr√©ciser votre motif de visite.");
                return;
            }
                         
    
            try {
                await addDoc(collection(db, "avisPatients"), {
                    nomPrenom,
                    age,
                    sexe,
                    hopital,
                    motif,
                    motifAutre,
                    accueil,
                    attente,
                    ecoute,
                    difficulties,
                    experience,
                    recommandation,
                    suggestion,
                    date: new Date().toISOString()
                });
    
                window.location.href = "confirmation.html"; // Redirection apr√®s envoi
                } catch (error) {
                    console.error("Erreur lors de l'enregistrement :", error);
                    alert("Une erreur s'est produite, veuillez r√©essayer.");
                }
        });
    </script>
    
    
      

    
</body>
</html>
